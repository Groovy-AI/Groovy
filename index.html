<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Groovy Virtual Pet</title>
<style>
body {
  margin:0;
  font-family:'Courier New', monospace;
  background: url('https://cdna.artstation.com/p/assets/images/images/062/116/328/large/baylee-smith-interior.jpg?1682400211') no-repeat center center fixed;
  background-size: cover;
  color: #e0d8a8;
  display:flex;
  height:100vh;
  overflow:hidden;
}
#sidebar {
  width:250px;
  background: rgba(34,34,34,0.9);
  padding:20px;
  overflow-y:auto;
}
#sidebar h2 { text-align:center; color:#fff; }
#sidebar img { width:100%; border-radius:10px; margin-bottom:10px; }
#sidebar .stats { color:#fff; margin-bottom:10px; line-height:1.5; }
#sidebar ul { list-style:none; padding:0; margin:0; }
#sidebar li { margin:5px 0; }
#sidebar button {
  width:100%; padding:10px; background:#444; color:#fff;
  border:none; border-radius:5px; cursor:pointer; text-align:left;
  margin-bottom:5px;
}
#sidebar button:hover { background:#666; }
#main {
  flex:1;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  position:relative;
  padding-top:50px;
}
#mood {
  font-size:36px; 
  margin-bottom:10px; 
}
#groovy {
  width:200px;
  transition: transform 0.3s;
  cursor: grab;
  position: absolute;
  left: calc(50% - 100px);
  top: 100px;
}
.bounce { animation: bounce 0.6s ease; }
.dance { animation: dance 0.5s infinite alternate; }
.sleep { opacity:0.5; }
.tilt { transform: rotate(10deg); }

@keyframes bounce { 0% { transform: translateY(0); } 50% { transform: translateY(-15px); } 100% { transform: translateY(0); } }
@keyframes dance { 0% { transform: rotate(0deg); } 50% { transform: rotate(15deg); } 100% { transform: rotate(-15deg); } }

#output {
  background: rgba(0,0,0,0.7);
  padding:15px;
  border-radius:10px;
  width:60%;
  text-align:center;
  font-size:18px;
  position: absolute;
  bottom: 80px;
}
#level {
  text-align:center;
  margin-top:10px;
  font-weight:bold;
  color:#fff;
}
button.restart {
  margin-top:10px;
  background:#ff4444;
  color:#fff;
}
</style>
</head>
<body>

<div id="sidebar">
<h2>Groovy Commands</h2>
<img id="sidebar-groovy" src="https://cdn3d.iconscout.com/3d/premium/thumb/personaje-robot-con-inteligencia-artificial-saludando-con-una-gran-sonrisa-3d-icon-png-download-11431338.png" alt="Groovy">

<div class="stats" id="batteryStats">
Battery: 100%
</div>
<div id="level">Level: 1</div>

<ul>
  <li><button onclick="interact('feed')">Feed</button></li>
  <li><button onclick="interact('drink')">Give Water</button></li>
  <li><button onclick="interact('play')">Play</button></li>
  <li><button onclick="interact('charge')">Charge</button></li>
  <li><button onclick="interact('pet')">Pet</button></li>
  <li><button onclick="interact('joke')">Tell a Joke</button></li>
  <li><button onclick="interact('dance')">Dance</button></li>
  <li><button onclick="interact('sleep')">Sleep</button></li>
  <li><button onclick="interact('workout')">Workout</button></li>
  <li><button onclick="interact('bath')">Bath</button></li>
  <li><button onclick="interact('hug')">Hug</button></li>
  <li><button onclick="interact('birthday')">Birthday</button></li>
  <li><button onclick="interact('game')">Play Number Game</button></li>
</ul>
</div>

<div id="main">
<div id="mood">üôÇ</div>
<img id="groovy" src="https://cdn3d.iconscout.com/3d/premium/thumb/personaje-robot-con-inteligencia-artificial-saludando-con-una-gran-sonrisa-3d-icon-png-download-11431338.png" alt="Groovy">
<div id="output">Loading Groovy...</div>
</div>

<script>
const groovy = document.getElementById('groovy');
const output = document.getElementById('output');
const batteryStats = document.getElementById('batteryStats');
const levelEl = document.getElementById('level');
const moodEl = document.getElementById('mood');

let battery = localStorage.getItem('groovyBattery')? parseInt(localStorage.getItem('groovyBattery')): 100;
let level = localStorage.getItem('groovyLevel')? parseInt(localStorage.getItem('groovyLevel')): 1;
let exp = localStorage.getItem('groovyExp')? parseInt(localStorage.getItem('groovyExp')): 0;
let happiness = localStorage.getItem('groovyHappiness')? parseInt(localStorage.getItem('groovyHappiness')): 80;
let dead = false;
let recentMoodActions = [];

const jokes = [
"Why did the robot go on vacation? He needed to recharge his batteries!",
"What do you call a pirate robot? Arrr2-D2!",
"Why was the robot so bad at soccer? Because it kept kicking up sparks!",
"What do you get if you cross a robot and a tractor? A transfarmer!",
"Why did the robot cross the road? Because it was programmed to!",
"How do robots pay for things? With cache!",
"Why did the computer get cold? It left its Windows open!",
"Why did the robot go on a diet? Too many bytes!",
// ... add more until 50+
];

const responses = {
  play: [
    "Yay! Playing is so much fun!",
    "I love this game!",
    "You're the best human!",
    "Woohoo, let's go again!",
    "This is awesome!"
    // ... add more until ~30+
  ],
  pet: [
    "Hehe, that feels nice!",
    "I love headpats!",
    "Thanks for the affection!",
    "So cozy!",
    "You're making me happy!"
  ],
  dance: [
    "Let's groove!",
    "I love dancing with you!",
    "Boogie time!",
    "Shake it, shake it!",
    "Feeling the rhythm!"
  ],
  workout: [
    "Phew, that was intense!",
    "I feel stronger!",
    "Let's keep moving!",
    "Good job team!",
    "Flexing circuits!"
  ],
  bath: [
    "All clean and shiny!",
    "Splish splash!",
    "Feeling fresh!",
    "Sparkly as ever!",
    "Time for self-care!"
  ],
  hug: [
    "Aww, thanks for the hug!",
    "I feel warm inside!",
    "Cuddles are the best!",
    "I love hugs!",
    "So comforting!"
  ],
  feed: [
    "Yum, that was tasty!",
    "Delicious!",
    "Thanks for the food!",
    "I love snacks!",
    "Feeling energized!"
  ],
  drink: [
    "Refreshing!",
    "Ahh, just what I needed!",
    "So hydrating!",
    "Feeling great!",
    "Slurp!"
  ],
  charge: [
    "Charging up!",
    "Powering up circuits!",
    "Feeling electrified!",
    "Zap zap!",
    "Energy restored!"
  ],
  sleep: [
    "Zzz... so comfy!",
    "Dreaming of adventures!",
    "I feel rested!",
    "Time to recharge!",
    "Sleep mode activated!"
  ]
};

// --- TTS Setup ---
let groovyVoice = null;
function loadVoices() {
  let voices = speechSynthesis.getVoices();
  if(voices.length > 0){
    groovyVoice = voices.find(v => v.name.toLowerCase().includes("zira") || v.name.toLowerCase().includes("samantha") || v.name.toLowerCase().includes("english")) || voices[0];
  }
}
speechSynthesis.onvoiceschanged = loadVoices;
loadVoices();

function speak(text){
  if(!groovyVoice) loadVoices();
  let u = new SpeechSynthesisUtterance(text);
  u.voice = groovyVoice;
  u.pitch = 1.5;
  u.rate = 1.1;
  u.volume = 1;
  speechSynthesis.speak(u);
}

function updateGroovyStats(){
  if(dead) return;
  let moodIcon = happiness>80?'üòÑ':happiness>50?'üôÇ':happiness>20?'üòê':'üò¢';
  moodEl.textContent = moodIcon;
  batteryStats.textContent = `Battery: ${battery}%`;
  levelEl.textContent = `Level: ${level}`;
  localStorage.setItem('groovyBattery', battery);
  localStorage.setItem('groovyHappiness', happiness);
  localStorage.setItem('groovyLevel', level);
  localStorage.setItem('groovyExp', exp);
  if(battery <= 0){
    dead = true;
    battery = 0;
    groovy.style.opacity = 0.3;
    output.innerHTML = "üíÄ Groovy died!<br><button class='restart' onclick='restartGame()'>Restart</button>";
  }
}

function gainExp(amount){ exp+=amount; if(exp>=100){ level++; exp=0; showOutput(`üéâ Groovy leveled up! Now at level ${level}!`); } }
function gainHappiness(amount){ happiness+=amount; if(happiness>100) happiness=100; if(happiness<0) happiness=0; }

function showOutput(msg){
  output.textContent = msg;
  speak(msg);
}

function interact(action){
  if(dead) return;
  let msg = "";
  const moodActions = ['play','pet','dance','workout','bath','hug'];

  if(moodActions.includes(action)){
    recentMoodActions.push(action);
    if(recentMoodActions.length > 3) recentMoodActions.shift();
    if(recentMoodActions.every(a => a === action)){
      happiness = Math.max(0,happiness-10);
      msg = "I'm getting bored of this...";
    } else {
      happiness = Math.min(100,happiness+10);
      msg = responses[action][Math.floor(Math.random()*responses[action].length)];
    }
  } else {
    msg = responses[action] ? responses[action][Math.floor(Math.random()*responses[action].length)] : "Groovy is unsure what to do...";
  }

  // Effect on battery/exp
  if(action==='play' || action==='workout') battery = Math.max(0,battery-5);
  gainExp(10);
  gainHappiness(0); // already applied

  showOutput(msg);
  updateGroovyStats();
}

// Drag Groovy
let isDragging=false, offsetX=0, offsetY=0;
groovy.addEventListener('mousedown',(e)=>{ isDragging=true; offsetX=e.clientX-groovy.offsetLeft; offsetY=e.clientY-groovy.offsetTop; groovy.style.cursor='grabbing'; });
document.addEventListener('mouseup',()=>{ isDragging=false; groovy.style.cursor='grab'; });
document.addEventListener('mousemove',(e)=>{ if(isDragging){ groovy.style.left=(e.clientX-offsetX)+'px'; groovy.style.top=(e.clientY-offsetY)+'px'; } });

// Restart
function restartGame(){
  battery = 100; happiness=80; level=1; exp=0; dead=false; recentMoodActions=[];
  groovy.style.opacity=1;
  updateGroovyStats();
  showOutput("Groovy is back! Ready to play again!");
}

// Initialize
updateGroovyStats();
showOutput("ü§ñ Hello! I'm Groovy, your virtual pet!");
</script>
</body>
</html>
