<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Groovy the Robot Pet</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    #container {
      display: flex;
      height: 100vh;
    }
    #commands {
      width: 200px;
      background: #222;
      color: white;
      padding: 10px;
      text-align: left;
    }
    #commands h2 {
      font-size: 18px;
      margin-bottom: 10px;
    }
    #commands button {
      display: block;
      width: 100%;
      margin: 5px 0;
      padding: 8px;
      background: #444;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #commands button:hover {
      background: #666;
    }
    #main {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    #groovy {
      width: 180px;
      margin-bottom: 20px;
      transition: opacity 1s;
      cursor: grab;
      position: relative;
    }
    #stats {
      font-size: 16px;
      margin-bottom: 20px;
    }
    #output {
      position: absolute;
      bottom: 100px; /* lifted higher for mobile */
      width: 90%;
      max-width: 600px;
      padding: 10px;
      background: white;
      border: 1px solid #ccc;
      border-radius: 8px;
      min-height: 50px;
    }
    #restart {
      display: none;
      margin-top: 20px;
      padding: 10px 20px;
      background: red;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<div id="container">
  <div id="commands">
    <h2>Commands</h2>
    <button onclick="interact('feed')">Feed</button>
    <button onclick="interact('drink')">Drink</button>
    <button onclick="interact('play')">Play</button>
    <button onclick="interact('pet')">Pet</button>
    <button onclick="interact('joke')">Joke</button>
    <button onclick="interact('workout')">Workout</button>
    <button onclick="interact('bath')">Bath</button>
    <button onclick="interact('sleep')">Sleep</button>
  </div>

  <div id="main">
    <img id="groovy" src="https://cdn3d.iconscout.com/3d/premium/thumb/personaje-robot-con-inteligencia-artificial-saludando-con-una-gran-sonrisa-3d-icon-png-download-11431338.png" alt="Groovy">
    <div id="stats">
      Battery: <span id="battery">100%</span> | 
      Hunger: <span id="hunger">0%</span> | 
      Thirst: <span id="thirst">0%</span> | 
      Cleanliness: <span id="cleanliness">100%</span> | 
      Health: <span id="health">100%</span>
    </div>
    <div id="output">Groovy is waiting for you...</div>
    <button id="restart" onclick="restartGroovy()">Restart</button>
  </div>
</div>

<script>
let battery=100,hunger=0,thirst=0,cleanliness=100,health=100;
const groovy=document.getElementById("groovy");
const output=document.getElementById("output");
const restartBtn=document.getElementById("restart");

// --- Voice setup ---
let groovyVoice = null;
function loadVoices() {
  let voices = speechSynthesis.getVoices();
  if (voices.length > 0) {
    // Prefer robot/digital sounding or playful voices
    groovyVoice = voices.find(v => 
      v.name.toLowerCase().includes("robot") || 
      v.name.toLowerCase().includes("google uk english male") || 
      v.name.toLowerCase().includes("fred") || 
      v.name.toLowerCase().includes("alex") || 
      v.name.toLowerCase().includes("david")
    ) || voices[0]; // fallback to first available
  }
}
speechSynthesis.onvoiceschanged = loadVoices;
loadVoices();

function groovySpeak(text) {
  if (!groovyVoice) loadVoices();
  let u = new SpeechSynthesisUtterance(text);
  u.voice = groovyVoice;
  u.pitch = 1.7; // higher = cuter
  u.rate = 1.15; // playful, a bit fast
  u.volume = 1;
  speechSynthesis.speak(u);
}

function showMessage(msg){
  output.innerHTML=msg;
  groovySpeak(msg);
}

function updateStats(){
  document.getElementById("battery").textContent=battery+"%";
  document.getElementById("hunger").textContent=hunger+"%";
  document.getElementById("thirst").textContent=thirst+"%";
  document.getElementById("cleanliness").textContent=cleanliness+"%";
  document.getElementById("health").textContent=health+"%";

  if(battery<=0){
    battery=0;
    groovy.style.opacity=0.5;
    showMessage("⚠️ Groovy died! Click Restart.");
    restartBtn.style.display="inline-block";
  }
}

function interact(action){
  if(battery<=0) return;

  let msg="";
  switch(action){
    case "feed": hunger=Math.max(0,hunger-20); msg="Yum! Thanks for the food!"; break;
    case "drink": thirst=Math.max(0,thirst-20); msg="Slurp! That was refreshing!"; break;
    case "play": battery-=10; hunger+=5; thirst+=5; cleanliness-=10; msg="Woo! That was fun!"; break;
    case "pet": msg="Hehe! I love headpats! 🤖💕"; break;
    case "joke": msg="Why did the robot go to school? Because it had lots of 'byte'-s to learn!"; break;
    case "workout": battery-=15; hunger+=10; thirst+=10; cleanliness-=15; msg="Phew! That was a good workout!"; break;
    case "bath": cleanliness=100; msg="Splish splash! All clean!"; break;
    case "sleep": battery=Math.min(100,battery+30); msg="Zzz... I feel recharged!"; break;
    default: msg="Groovy: Unknown action!";
  }

  // Stat boundaries
  hunger=Math.min(100,hunger);
  thirst=Math.min(100,thirst);
  cleanliness=Math.max(0,Math.min(100,cleanliness));
  battery=Math.max(0,Math.min(100,battery));

  // Health drop if neglected
  if(hunger>80 || thirst>80 || cleanliness<20) health=Math.max(0,health-5);
  if(health<=0){ battery=0; }

  showMessage(msg);
  updateStats();
}

function restartGroovy(){
  battery=100; hunger=0; thirst=0; cleanliness=100; health=100;
  groovy.style.opacity=1;
  restartBtn.style.display="none";
  showMessage("Groovy is back! Ready to play again!");
  updateStats();
}

// Natural stat decay
setInterval(()=>{
  if(battery>0){
    hunger=Math.min(100,hunger+1);
    thirst=Math.min(100,thirst+1);
    cleanliness=Math.max(0,cleanliness-0.5);
    battery=Math.max(0,battery-0.2);
    if(hunger>80||thirst>80||cleanliness<20) health=Math.max(0,health-1);
    if(health<=0){ battery=0; }
    updateStats();
  }
},5000);

// Init
updateStats();
showMessage("👋 Hi! I'm Groovy, your robot pet!");
</script>

</body>
</html>
