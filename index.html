<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Groovy Virtual Pet</title>
<style>
body {
  margin:0;
  font-family:'Courier New', monospace;
  background: url('https://cdna.artstation.com/p/assets/images/images/062/116/328/large/baylee-smith-interior.jpg?1682400211') no-repeat center center fixed;
  background-size: cover;
  color: #e0d8a8;
  display:flex;
  height:100vh;
  overflow:hidden;
}
#sidebar {
  width:250px;
  background: rgba(34,34,34,0.9);
  padding:20px;
  overflow-y:auto;
}
#sidebar h2 { text-align:center; color:#fff; }
#sidebar img { width:100%; border-radius:10px; margin-bottom:10px; }
#sidebar .stats { color:#fff; margin-bottom:10px; line-height:1.5; }
#sidebar ul { list-style:none; padding:0; margin:0; }
#sidebar li { margin:5px 0; }
#sidebar button {
  width:100%; padding:10px; background:#444; color:#fff;
  border:none; border-radius:5px; cursor:pointer; text-align:left;
  margin-bottom:5px;
}
#sidebar button:hover { background:#666; }
#main {
  flex:1;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  position:relative;
  padding-top:50px;
}
#mood {
  font-size:36px; 
  margin-bottom:10px; 
}
#groovy {
  width:200px;
  transition: transform 0.3s;
  cursor: grab;
  position: absolute;
  left: calc(50% - 100px);
  top: 100px;
}
.bounce { animation: bounce 0.6s ease; }
.dance { animation: dance 0.5s infinite alternate; }
.sleep { opacity:0.5; }
.tilt { transform: rotate(10deg); }

@keyframes bounce { 0% { transform: translateY(0); } 50% { transform: translateY(-15px); } 100% { transform: translateY(0); } }
@keyframes dance { 0% { transform: rotate(0deg); } 50% { transform: rotate(15deg); } 100% { transform: rotate(-15deg); } }

#output {
  background: rgba(0,0,0,0.7);
  padding:15px;
  border-radius:10px;
  width:60%;
  text-align:center;
  font-size:18px;
  position: absolute;
  bottom: 80px;
}
#level {
  text-align:center;
  margin-top:10px;
  font-weight:bold;
  color:#fff;
}
button.restart {
  margin-top:10px;
  background:#ff4444;
  color:#fff;
}
</style>
</head>
<body>

<div id="sidebar">
<h2>Groovy Commands</h2>
<img id="sidebar-groovy" src="https://cdn3d.iconscout.com/3d/premium/thumb/personaje-robot-con-inteligencia-artificial-saludando-con-una-gran-sonrisa-3d-icon-png-download-11431338.png" alt="Groovy">

<div class="stats" id="batteryStats">
Battery: 100%
</div>
<div id="level">Level: 1</div>
<div id="mood">üôÇ</div>

<ul>
  <li><button onclick="interact('feed')">Feed</button></li>
  <li><button onclick="interact('drink')">Give Water</button></li>
  <li><button onclick="interact('play')">Play</button></li>
  <li><button onclick="interact('charge')">Charge</button></li>
  <li><button onclick="interact('pet')">Pet</button></li>
  <li><button onclick="interact('joke')">Tell a Joke</button></li>
  <li><button onclick="interact('dance')">Dance</button></li>
  <li><button onclick="interact('sleep')">Sleep</button></li>
  <li><button onclick="interact('workout')">Workout</button></li>
  <li><button onclick="interact('bath')">Bath</button></li>
  <li><button onclick="interact('hug')">Hug</button></li>
</ul>
</div>

<div id="main">
<img id="groovy" src="https://cdn3d.iconscout.com/3d/premium/thumb/personaje-robot-con-inteligencia-artificial-saludando-con-una-gran-sonrisa-3d-icon-png-download-11431338.png" alt="Groovy">
<div id="output">Loading Groovy...</div>
<button class="restart" onclick="restartGame()" style="display:none;">Restart</button>
</div>

<script>
const groovy = document.getElementById('groovy');
const output = document.getElementById('output');
const batteryStats = document.getElementById('batteryStats');
const levelEl = document.getElementById('level');
const moodEl = document.getElementById('mood');
const restartBtn = document.querySelector('button.restart');

let battery = 100, level = 1, exp = 0, happiness = 80, dead = false;
let groovyVoice = null;

// Load voices manually
function loadVoices() {
  const voices = speechSynthesis.getVoices();
  groovyVoice = voices.find(v => v.name.includes("Google UK English Female")) || voices[0];
}
speechSynthesis.onvoiceschanged = loadVoices;
loadVoices();

function groovySpeak(text){
  if(!groovyVoice) loadVoices();
  const utter = new SpeechSynthesisUtterance(text.replace(/[\u{1F600}-\u{1F64F}]/gu,""));
  utter.voice = groovyVoice;
  utter.pitch = 1.5;
  utter.rate = 1.1;
  utter.volume = 1;
  speechSynthesis.speak(utter);
}

function updateGroovyStats(){
  if(dead) return;
  let moodEmoji = happiness>80?'üòÑ':happiness>50?'üôÇ':happiness>20?'üòê':'üò¢';
  moodEl.textContent = moodEmoji;

  batteryStats.textContent = `Battery: ${battery}%`;
  levelEl.textContent = `Level: ${level}`;

  // Mood affects battery decay speed
  const moodFactor = 1 + (50 - Math.min(happiness,50))/50; // if happiness <50, battery drains faster

  if(battery <= 0){
    battery = 0;
    dead = true;
    groovy.style.opacity = 0.3;
    showDeathMessage();
  }
}

function showMessage(msg){
  if(dead) return;
  output.textContent = msg.replace(/[\u{1F600}-\u{1F64F}]/gu,"");
  groovySpeak(msg);
  groovy.classList.add('bounce');
  setTimeout(()=>{ groovy.classList.remove('bounce'); },600);
}

function gainExp(amount){ exp+=amount; if(exp>=100){ level++; exp=0; showMessage(`Groovy leveled up! Now at level ${level}!`); } }
function gainHappiness(amount){ happiness+=amount; if(happiness>100) happiness=100; if(happiness<0) happiness=0; updateGroovyStats(); }

function showDeathMessage(){
  output.textContent = "üíÄ Groovy died!";
  restartBtn.style.display = "block";
}

function restartGame(){
  battery = 100;
  happiness = 80;
  level = 1;
  exp = 0;
  dead = false;
  groovy.style.opacity = 1;
  restartBtn.style.display = "none";
  updateGroovyStats();
  showMessage("Groovy is ready again!");
}

// Interactions
function interact(action){
  if(dead) return;
  let message="";
  switch(action){
    case 'feed': battery+=5; if(battery>100) battery=100; gainExp(10); gainHappiness(5); message="Yummy!"; break;
    case 'drink': battery+=2; if(battery>100) battery=100; gainExp(5); gainHappiness(5); message="Refreshing!"; break;
    case 'play': battery-=5; gainExp(15); gainHappiness(15); message="That was fun!"; break;
    case 'charge': battery+=30; if(battery>100) battery=100; gainExp(5); gainHappiness(5); message="Charging up!"; break;
    case 'pet': battery+=5; if(battery>100) battery=100; gainExp(10); gainHappiness(10); message="Yay! Thanks!"; break;
    case 'dance': gainExp(15); gainHappiness(10); message="Let's dance!"; break;
    case 'sleep': message="Sleeping..."; break;
    case 'workout': battery-=10; if(battery<0) battery=0; gainExp(20); gainHappiness(5); message="Working out!"; break;
    case 'bath': gainExp(5); gainHappiness(5); message="Feeling clean!"; break;
    case 'hug': battery+=5; if(battery>100) battery=100; gainExp(10); gainHappiness(10); message="Aww, thanks!"; break;
    case 'joke': message="Why did the robot go to school? Because it had a lot of bytes to learn!"; break;
    default: message="Unknown action!";
  }
  showMessage(message);
  updateGroovyStats();
}

// Battery decay loop
setInterval(()=>{
  if(dead) return;
  let moodFactor = 1 + (50 - Math.min(happiness,50))/50;
  battery -= 1 * moodFactor;
  if(battery<0) battery=0;
  happiness -= 0.5;
  if(happiness<0) happiness=0;
  updateGroovyStats();
},10000);

// Drag Groovy
let isDragging=false, offsetX=0, offsetY=0;
groovy.addEventListener('mousedown',(e)=>{ isDragging=true; offsetX=e.clientX-groovy.offsetLeft; offsetY=e.clientY-groovy.offsetTop; groovy.style.cursor='grabbing'; });
document.addEventListener('mouseup',()=>{ isDragging=false; groovy.style.cursor='grab'; });
document.addEventListener('mousemove',(e)=>{ if(isDragging){ groovy.style.left=(e.clientX-offsetX)+'px'; groovy.style.top=(e.clientY-offsetY)+'px'; } });

// Init
updateGroovyStats();
showMessage("Hello! I'm Groovy, your robot pet!");
</script>

</body>
</html>
